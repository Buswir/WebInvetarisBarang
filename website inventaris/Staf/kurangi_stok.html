<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Kurangi Stok - Sistem Inventaris</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <style>
      /* ... CSS lainnya tetap sama ... */
      body {
        font-size: 0.875rem;
        background-color: #f8f9fa;
      }
      .sidebar {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
        z-index: 100;
        padding: 48px 0 0;
        box-shadow: inset -1px 0 0 rgba(0, 0, 0, 0.1);
      }
      @media (max-width: 767.98px) {
        .sidebar {
          top: 56px;
        }
      }
      .sidebar-sticky {
        position: relative;
        top: 0;
        height: calc(100vh - 48px);
        padding-top: 0.5rem;
        overflow-x: hidden;
        overflow-y: auto;
      }
      .nav-link {
        font-weight: 500;
        color: #333;
      }
      .nav-link .bi {
        margin-right: 8px;
        color: #727272;
      }
      .nav-link.active {
        color: #0d6efd;
      }
      .nav-link:hover .bi,
      .nav-link.active .bi {
        color: inherit;
      }
      .main-content {
        padding-top: 24px;
      }
    </style>
  </head>
  <body>
    <header
      class="navbar navbar-dark sticky-top bg-primary flex-md-nowrap p-0 shadow"
    >
      <a class="navbar-brand col-md-3 col-lg-2 me-0 px-3 fs-6" href="#"
        >Sistem Inventaris</a
      ><button
        class="navbar-toggler position-absolute d-md-none collapsed"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#sidebarMenu"
        aria-controls="sidebarMenu"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="navbar-nav">
        <div class="nav-item text-nowrap">
          <a class="nav-link px-3" href="../index.html">Logout</a>
        </div>
      </div>
    </header>
    <div class="container-fluid">
      <div class="row">
        <nav
          id="sidebarMenu"
          class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse"
        >
          <div class="position-sticky pt-3 sidebar-sticky">
            <ul class="nav flex-column">
              <li class="nav-item">
                <a class="nav-link" href="dashboard.html"
                  ><i class="bi bi-speedometer2"></i> Dashboard</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="lihat_stok.html"
                  ><i class="bi bi-boxes"></i> Lihat Stok</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="tambah_stok.html"
                  ><i class="bi bi-box-arrow-in-down"></i> Tambah Stok</a
                >
              </li>
              <li class="nav-item">
                <a
                  class="nav-link active"
                  aria-current="page"
                  href="kurangi_stok.html"
                  ><i class="bi bi-box-arrow-up"></i> Kurangi Stok</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="buat order.html"
                  ><i class="bi bi-truck"></i> Buat Order ke Supplier</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="riwayat.html"
                  ><i class="bi bi-clock-history"></i> Riwayat Stok</a
                >
              </li>
            </ul>
            <h6
              class="sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted text-uppercase"
            >
              <span>Pengguna</span>
            </h6>
            <ul class="nav flex-column mb-2">
              <li class="nav-item">
                <a class="nav-link" href="update_profil.html"
                  ><i class="bi bi-person-circle"></i> Update Profil</a
                >
              </li>
            </ul>
          </div>
        </nav>

        <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content">
          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <a href="dashboard.html">Dashboard</a>
              </li>
              <li class="breadcrumb-item active" aria-current="page">
                Kurangi Stok
              </li>
            </ol>
          </nav>
          <div
            class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
          >
            <h1 class="h2">Form Pengurangan Stok Barang</h1>
          </div>

          <div class="col-lg-8">
            <form class="needs-validation" novalidate>
              <div class="form-floating mb-3">
                <select class="form-select" id="pilihBarang" required>
                  <option value="" data-stok="0" selected disabled>
                    Pilih Barang...
                  </option>
                  <option value="1" data-stok="150">
                    Indomie Goreng (Stok: 150)
                  </option>
                  <option value="2" data-stok="15">
                    Beras Rojolele 5kg (Stok: 15)
                  </option>
                  <option value="3" data-stok="0">
                    Minyak Goreng Sania 2L (Stok: 0)
                  </option>
                  <option value="4" data-stok="250">
                    Teh Botol Sosro (Stok: 250)
                  </option>
                </select>
                <label for="pilihBarang"
                  >1. Pilih Barang yang Akan Dikurangi</label
                >
              </div>

              <div class="row g-2 mb-3">
                <div class="col-md">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control"
                      id="stokSaatIni"
                      placeholder="Stok Saat Ini"
                      readonly
                    />
                    <label for="stokSaatIni">Stok Tersedia</label>
                  </div>
                </div>
                <div class="col-md">
                  <div class="form-floating">
                    <input
                      type="number"
                      class="form-control"
                      id="jumlahPengurangan"
                      placeholder="Jumlah"
                      required
                    />
                    <label for="jumlahPengurangan"
                      >2. Jumlah yang Dikurangi</label
                    >
                  </div>
                </div>
              </div>

              <div class="form-floating mb-3">
                <input
                  type="date"
                  class="form-control"
                  id="tglTransaksi"
                  required
                />
                <label for="tglTransaksi">3. Tanggal Transaksi</label>
              </div>

              <div class="form-floating mb-3">
                <select class="form-select" id="alasan" required>
                  <option value="" selected disabled>
                    Pilih Alasan Pengurangan...
                  </option>
                  <option value="keluar">
                    Barang Keluar (Terjual/Transfer)
                  </option>
                  <option value="rusak">Barang Rusak</option>
                  <option value="hilang">Barang Hilang</option>
                  <option value="kadaluwarsa">Barang Kadaluwarsa</option>
                </select>
                <label for="alasan">4. Alasan Pengurangan Stok</label>
              </div>

              <div class="form-floating mb-3">
                <textarea
                  class="form-control"
                  placeholder="Catatan tambahan"
                  id="keterangan"
                  style="height: 100px"
                ></textarea>
                <label for="keterangan"
                  >5. Keterangan / Catatan Tambahan (Opsional)</label
                >
              </div>

              <hr class="my-4" />
              <button class="btn btn-primary btn-lg" type="submit">
                Konfirmasi Pengurangan
              </button>
              <a href="dashboard.html" class="btn btn-outline-secondary btn-lg"
                >Batal</a
              >
            </form>
          </div>
        </main>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Set tanggal transaksi ke hari ini secara default
      document.getElementById("tglTransaksi").valueAsDate = new Date();

      // JavaScript untuk menampilkan stok saat barang dipilih
      const pilihBarangSelect = document.getElementById("pilihBarang");
      const stokSaatIniInput = document.getElementById("stokSaatIni");
      const jumlahPenguranganInput =
        document.getElementById("jumlahPengurangan");

      if (pilihBarangSelect) {
        pilihBarangSelect.addEventListener("change", function () {
          // Ambil stok dari atribut data-stok
          const selectedOption = this.options[this.selectedIndex];
          const stok = selectedOption.getAttribute("data-stok");

          // Tampilkan stok di input yang readonly
          stokSaatIniInput.value = stok;

          // Set batas maksimum untuk input jumlah pengurangan
          jumlahPenguranganInput.max = stok;
        });
      }
    </script>
  </body>
</html>
